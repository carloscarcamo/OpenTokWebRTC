function Chat(s,e,t,i,n){_this=this,this.roomId=t,this.session=i,this.observable=Rx.Observable,this.$chat=$("#"+s),this.$msj=$("#"+e),this.$chatBtn=$("#displayChat"),this.messages=[],this.peerConnection=void 0,this.io=n,this.init()}Chat.prototype={_this:this,constructor:Chat,init:function(){this.domEvents(),this.events()},setPeerConnection:function(s){this.peerConnection=s},events:function(){var s=this.observable.fromEvent(this.io,"message");s.subscribe(function(s){console.log(s.message),_this.newMessage(s.message,"me")})},domEvents:function(){var s=this.observable.fromEvent(this.$msj,"keyup"),e=this.observable.fromEvent(this.$chatBtn,"click");s.subscribe(function(s){var e=s.which,t=$(s.target).val();13==e&&""!=t&&($(s.target).val(""),_this.sendMenssage(t))}),e.subscribe(function(s){$("#chat").toggle()})},sendMenssage:function(s){this.io.emit("new message",{message:s}),_this.newMessage(s,"peer")},newMessage:function(s,e){var t=$("<div></div>"),i=$("<div></div>"),n=$("<div></div>"),a=$("<div></div>");t.append(i),i.append(n),i.append(a),t.addClass("col-xs-12"),a.addClass("msg-content"),"peer"==e?(i.addClass("msg-publisher"),n.addClass("arrow-right"),a.html(s),this.$chat.append(t)):"me"==e&&(i.addClass("msg-subscribers"),n.addClass("arrow-left"),a.html(s),this.$chat.append(t))}};